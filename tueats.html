<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUEats</title>
    <link rel="stylesheet" href="tueats.css">
    <script>
        //Runs all validity checks on form submission.
        function validForm(){
            let valid = passwordCheck() && referralCheck() && unameCheck()
        }

        //Checks for a valid username: between 6 and 24 characters inclusive.
        function unameCheck(){
            let input = document.forms["sign-up-form"]["Username"].value
            let valid = true

            if (!(input.length >= 6)){
                event.preventDefault()
                valid = false
                window.alert("Username must be at least 6 characters long.")
            }

            if (!(input.length <= 24)){
                event.preventDefault()
                valid = false
                window.alert("Username must be less than 24 characters long.")
            }

            return valid
        }

        //Checks for invalid referral codes.
        function referralCheck(){
            const badRefs = ["tucis", "bogo", "eatgood"]
            let valid = !(badRefs.includes(document.forms["sign-up-form"]["Referral"].value))
            if(!valid){
                event.preventDefault()
                window.alert("This referral code is invalid.")
            }
            return valid
        }

        //Checks for matching password entries.
        function passwordCheck(){
            let match = document.forms["sign-up-form"]["Password"].value == document.forms["sign-up-form"]["Password Verify"].value
            if(!match){
                event.preventDefault()
                window.alert("Ensure passwords match.")
            }
            return match;
        }
    </script>
</head>
<body>
    <!-- Title Text -->
    <h1>Welcome To TU Eats</h1>

    <!-- Account creation info field -->
    <fieldset>
        <legend>Sign Up</legend>
        <table id="form-table">
            <tr>
                <td>
                    <form method="GET" action="tueats_completed.html" id="sign-up-form" onsubmit=validForm()>
                        <p>Username: <input type="text" name="Username" required></p>
                        <p>Email: <input type="email" name="Email" required></p>
                        <p>Referral Code: <input type="text" name="Referral" oninput=referralCheck()></p>
                        <p>Password: <input type="password" name="Password" required></p>
                        <p>Verify Password: <input type="password" name="Password Verify"></p>
                        <p><input type="checkbox" name="Newsletter"> Sign Up For Our Newsletter?</p>
                        <input type="submit">
                    </form>
                </td>
                <td id="logo-cell">
                    <img src="assets/TULogo.png" alt="Towson Logo">
                </td>
            </tr>
        </table>
    </fieldset>

    <!-- Menu field -->
    <fieldset>
        <table id="menu-table">
            <caption>
                Menu is subject to change, please visit our <a href="https://towson.edu">main site</a> for more information.
            </caption>
            <tr class="header-row">
                <td></td>
                <td>Name</td>
                <td>Price</td>
                <td>Calories</td>
            </tr>
            <tr>
                <td>Item 1</td>
                <td>Burger</td>
                <td>$8</td>
                <td>550</td>
            </tr>
            <tr>
                <td>Item 2</td>
                <td>Mozzarella Sticks</td>
                <td>$7</td>
                <td rowspan="2">400</td>
            </tr>
            <tr>
                <td>Item 3</td>
                <td>Fries</td>
                <td>$4</td>
                
            </tr>
        </table>
    </fieldset>
</body>
</html>